<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Редактирование текста</title>
<style>
    #editableDiv {
        border: 1px solid #ccc;
        padding: 10px;
        cursor: text;
    }
    #editableTextarea {
        display: none;
        width: 100%;
        height: 200px;
        border: 1px solid #ccc;
        padding: 10px;
        resize: none;
    }
    .placeholder {
        color: #aaa;
    }
</style>
</head>
<body>

<div id="editableDiv" contenteditable="true" class="placeholder">
    Кликните здесь и нажмите Ctrl+E для редактирования
</div>
<textarea id="editableTextarea"></textarea>

<script>
    const editableDiv = document.getElementById('editableDiv');
    const editableTextarea = document.getElementById('editableTextarea');
    const placeholderText = 'Кликните здесь и нажмите Ctrl+E для редактирования';

    function handleFocus() {
        if (editableDiv.innerHTML.trim() === placeholderText) {
            editableDiv.innerHTML = '';
            editableDiv.classList.remove('placeholder');
        }
    }

    function handleBlur() {
        if (editableDiv.innerHTML.trim() === '') {
            editableDiv.innerHTML = placeholderText;
            editableDiv.classList.add('placeholder');
        } else {
            editableDiv.classList.remove('placeholder');
        }
    }

    function handleKeyDown(event) {
        if (event.ctrlKey && event.key === 'e') {
            event.preventDefault();
            if (editableTextarea.style.display !== 'block') {
                editableDiv.style.display = 'none';
                editableTextarea.style.display = 'block';
                editableTextarea.value = editableDiv.innerHTML.trim() === placeholderText ? '' : editableDiv.innerHTML;
                editableTextarea.focus();
            }
        } else if (event.ctrlKey && event.key === 's' && editableTextarea.style.display === 'block') {
            event.preventDefault();
            editableDiv.innerHTML = editableTextarea.value;
            editableDiv.style.display = 'block';
            editableTextarea.style.display = 'none';
            handleBlur();
        } else if (event.key === 'Escape') {
            event.preventDefault();
            editableDiv.style.display = 'block';
            editableTextarea.style.display = 'none';
            handleBlur();
        }
    }

    document.addEventListener('keydown', handleKeyDown);
    editableDiv.addEventListener('focus', handleFocus);
    editableDiv.addEventListener('blur', handleBlur);
</script>

</body>
</html>
